---
abstract: |
    We present some variants of the Kaplansky condition for a K-Hermite ring $R$ to be an elementary divisor ring; for example, a commutative K-Hermite ring $R$ is an EDR iff for any elements $x,y,z\in R$ such that $(x,y)=(1)$, there exists an element $\lambda\in R$ such that $x+\lambda y=uv$, where $(u,z)=(v,1-z)=(1)$.

    We present an example of a a Bézout domain that is an elementary divisor ring, but it does not have almost stable range $1$, thus answering a question of Warren Wm. McGovern.
author:
- |
    Moshe Roitman\
    Department of Mathematics\
    University of Haifa\
    Mount Carmel, Haifa 31905, Israel
title: The Kaplansky condition and rings of almost stable range $1$
---

Introduction
============

First we recall some basic definitions and known results.

All rings here are commutative with unity. A ring $R$ is [*Bézout*]{} if each finitely generated ideal of $R$ is principal.

Two rectangular matrices $A$ and $B$ in $\operatorname{M}_{m,n}(R)$ are [*equivalent*]{} if there exist invertible matrices $P\in\operatorname{M}_{m,m}(R)$ and $Q\in\operatorname{M}_{n,n}(R)$ such that $B=PAQ$.

The ring $R$ is [*K-Hermite*]{} if every rectangular matrix $A$ over $R$ is equivalent to an upper or a lower triangular matrix (following [@Lam-Serrprobprojmodu:06 Appendix to §4] we use the term ‘K-Hermite’ rather then ‘Hermite’ as in [@Kaplansky-Elemdivimodu:49]). From [@Kaplansky-Elemdivimodu:49] it follows that this definition is equivalent to the definition given there. See also [@Henriksen-Someremaelemdivi:55 Theorem 3]: by this theorem, a ring is K-Hermite iff for every two comaximal elements $a,b\in R$, there are two comaximal elements $a_1,b_1\in R$ such that $(a,b)=(a_1a+b_1b)$ in $R$. Parentheses $()$ are used to denote the ideal generated by the specified elements.

A ring $R$ is an [*elementary divisor ring (EDR)*]{} iff every rectangular matrix $A$ over $R$ is equivalent to a diagonal matrix. It follows from [@Kaplansky-Elemdivimodu:49] that this definition is equivalent to the definition given there.

An EDR is K-Hermite and a K-Hermite ring is Bézout. An integral domain is Bézout iff it is K-Hermite.

By [@Gillman+Henriksen-Someremaabouelem:56 Theorem 6] a ring $R$ is an EDR iff it satisfies the following two conditions:

1.  $R$ is K-Hermite;

2.  $R$ satisfies Kaplansky’s condition (see §2, condition (K) below).

By [@Gillman+Henriksen-Ringcontfuncwhic:56 Example 4.11], $(1)\ \not\hspace{-.3cm}\implies (2)$. The question in [@Henriksen-Someremaelemdivi:55] whether a Bézout domain is an EDR (equivalently, whether it satisfies Kaplansky’s condition), is still open. On the other hand, it is immediate that $(2)\hspace{.4cm} \not\hspace{-.3cm}\implies (1)$ (Remark \[kaplsr1\] below).

In section \[2\], we elaborate on the Kaplansky condition.

A row $[r_1,\dots,r_n]$ over a ring $R$ is [*unimodular*]{} if the elements $r_1,\dots,r_n$ generate the ideal $R$. The [*stable range*]{} $\operatorname{sr}(R)$ of a ring $R$ is the least integer $n\ge1$ (if it exists) such that for any unimodular row $[r_1, . . . , r_{n+1}]$ over $R$, there exist $t_1, . . . , t_n\in R$ such that the row $$[r_1 + t_1r_{n+1}, . . . , r_n+t_nr_{n+1}]$$ is unimodular (see comments on [@Lam-Serrprobprojmodu:06 Theorem 5.2, Ch. VIII]). For background on stable range see [@Bass-Alge:68 §3, Ch. V].

The ring $R$ has [*almost stable range $1$*]{} if every proper homomorphic image of $R$ has stable range $1$ (see [@McGovern-Bezoringwithalmo:08]). By [@McGovern-Bezoringwithalmo:08 Theorem 3.7] a Bézout ring with almost stable range $1$ is an EDR. We elaborate on the almost stable range $1$ condition in §3. In particular, we present an elementary divisor domain (so Bézout) that does not have almost stable range $1$, thus answering the question of Warren Wm. McGovern in [@McGovern-Bezoringwithalmo:08] (Example \[warrenquest\]). By Remark \[almoststable\] below, a ring of stable range $1$ is of almost stable range $1$. On the other hand, $\mathbb Z$ is of almost stable range $1$, but is not of stable range $1$ (the stable range of $\mathbb Z$ is $2$. More generally, the stable range of any K-Hermite ring is $\le 2$ [@Menal+Moncasi-reguringwithstab:82 Proposition 8]. Also by [@-RedumatroverBezo:03 Theorem 1], a Bézout ring is K-Hermite iff is of stable range $\le2$).

For general background see [@Kaplansky-Elemdivimodu:49], [@Fuchs+Salce-Moduovernon-doma:01 §6, Ch. 3 ] and [@McGovern-Bezoringwithalmo:08].

On the Kaplansky condition {#2}
==========================

By [@Gillman+Henriksen-Someremaabouelem:56] a K-Hermite ring $R$ is an elementary divisor ring iff it satisfies Kaplansky’s condition (see [@Kaplansky-Elemdivimodu:49 Theorem 5.2]): [*$$\begin{aligned}
\tag{K}
&\text{For any three elements $a,b,c$ in $R$ that generate the
ideal $R,$}\\
&\text{there exist elements $p,q\in R$ so that $(pa,pb+qc)=(1)$ in $R$.}\end{aligned}$$*]{}

\[kaplsr1\] If $R$ is a ring of stable range $1$, then $R$ satisfies Kaplansky’s condition with $p=1$. Thus, if $R$ is a ring satisfying Kaplansky’s condition, then $R$ is not necessarily K-Hermite, even if $R$ is a Noetherian local domain.

Indeed, a local ring $R$ is of stable range $1$. If $R$ is also a Noetherian domain, then $R$ is K-Hermite iff $R$ is a principal ideal ring. Hence a Noetherian local domain that is not a principal ideal ring is of stable range $1$, but it does not satisfy Kaplansky’s condition.

In the proof of Lemma \[triangle\] below, we will use the following well-known fact:

\[rows\] Let $R$ be a ring, let $A$ be a matrix in $\operatorname{M}_{m,n}(R)$, let $\mathbf r$ be a row in in $\operatorname{M}_{1,n}(R)$, and let $1\le k\le n$. Then $\mathbf r$ belongs to the submodule of $R^n$ generated by the rows of the matrix $A$ iff there exists a matrix $C\in \operatorname{M}_{k,m}(R)$ such that $\mathbf r$ is the first row of the matrix $CA$.

\[triangle\] Let $A$ be a $2\times2$-matrix over a ring $R$, and let $\mathbf
u$ be a unimodular row of length $2$ over $R$.

Then\
$\mathbf u$ belongs to the submodule of $R^2$ generated by the rows of $A$ $\iff$ there exists an invertible matrix $P$ so that $\mathbf u$ is the first row of $PA$.

$\implies$:

By Remark \[rows\], there exists a $2$-row $\mathbf r$ over $R$ so that $\mathbf u=\mathbf r A$. Since the row $\mathbf u$ is unimodular, the row $\mathbf r$ is also unimodular. Since $\mathbf r$ is unimodular of length $2$, there exists an invertible matrix $P$ with first row equal to $\mathbf r$. Thus $\mathbf u$ is the first row of the matrix $PA$.

$\Longleftarrow$:

This follows from Remark \[rows\].

\[general\] Let $A$ be a $2\times 2$ matrix over a ring $R$ so that its entries generate the ideal $R$. Then\
$A$ is equivalent to a diagonal matrix $\iff$\
the submodule of $R^2$ generated by the rows of $A$ contains a unimodular row.

In this case $A$ is equivalent to a matrix of the form $\bigl(\begin{smallmatrix}
1& 0\\
0&*\end{smallmatrix}\bigr)$.

$\implies$

By assumption $A$ is equivalent to a diagonal matrix $D=\bigl(\begin{smallmatrix}
d_1& 0\\
0&d_2\end{smallmatrix}\bigr)$, where $d_1,d_2\in R$. Thus $d_1,d_2$ generate the ideal $R$. The sum of the rows of $D$, namely, $[d_1,d_2]$, is unimodular.

$\Longleftarrow$

By Lemma \[triangle\], the matrix $A$ is equivalent over $R$ to a matrix $B$ with first row unimodular. Hence the submodule generated by the columns of $B$ contains a column of the form $\left(\begin{matrix} 1\\ *\end{matrix}\right)$. By Lemma \[triangle\] again (for columns), we obtain that $A$ is equivalent to a matrix $\bigl(\begin{smallmatrix} 1& r\\
*&*\end{smallmatrix}\bigr)$. By subtracting the first column of the matrix $\bigl(\begin{smallmatrix} 1& r\\
*&*\end{smallmatrix}\bigr)$ multiplied by $r$ from its second column and by a similar elementary row transformation, we obtain a diagonal matrix of the form $\bigl(\begin{smallmatrix} 1&0\\
0&*\end{smallmatrix}\bigr)$.

(see [@Kaplansky-Elemdivimodu:49 Theorem 5.2] and [@Gillman+Henriksen-Someremaabouelem:56 Corollary 5].)\[kaplanskyc\]

Let $R$ be a ring. Let $A=\bigl(\begin{smallmatrix}
a& b\\
0&c\end{smallmatrix}\bigr)$ a triangular $2\times2$-matrix over $R$ so that $(a,b,c)=(1)$. Then $A$ is equivalent to a diagonal matrix over $R$ iff there exist elements $p,q$ in $R$ so $(pa,pb+qc)=(1)$.

Since $p[a,b]+q[0,c]=[pa,pb+qc]$ for any elements $p,q\in R$, the theorem follows from Lemma \[general\].

\[kaplanskyreformulated\] Let $R$ be any ring. If Kaplansky’s condition $(pb+qc,pa)=(1)$ holds for elements $a,b,c,p,q\in R$, then $$(pb+qc,a)=(p,c)=(1).$$

Indeed, Kaplansky’s condition implies that $$(pb+qc,a)=(pb+qc,p)=(1),$$ so $(p,c)=(1)$. Cf. the next proposition.

\[variantKaplansky\] Let $R$ be a K-Hermite ring, and let $a,b$ and $c$ be elements of $R$ that generate the ideal $R$. Then the following four conditions are equivalent:

1.  The matrix $\bigl(\begin{smallmatrix}
    a&b\\0&c\end{smallmatrix}\bigr)$ is equivalent to a diagonal matrix;

2.  There exist elements $p,q$ in $R$ so $(pa,pb+qc)=(1)$;

3.  There exist elements $p$ and $q$ in $R$ so that $(pb+qc,a)=(p,c)=(1)$;

4.  For some elements $\lambda, u,v\in R$ we have $b+\lambda c=uv$, and $(u,a)=(v,c)=(1)$.

Moreover, in (4) we may choose the elements $u$ and $v$ such that $(u,v)=(1)$.

$(1)\iff (2)$:

This follows from Theorem \[kaplanskyc\].

$(2)\implies (4)$:

Since $(pa, pb+qc)=(1)$ we obtain $(1)=(p,pb+qc)=(p,qc)$, so $(p,(pb+qc)c)=(1)$. Let $v$ be an element of $R$ so that $$vp\equiv 1\pmod {(pb+qc)c},$$ thus $vp\equiv 1\pmod c$. We have $v(pb+qc)\equiv b\pmod c$, so $v(pb+qc)=b+\lambda c$ for some element $\lambda\in R$. Hence $b+\lambda c=uv$, where $u=pb+qc$, thus $(u,a)=(v,c)=(u,v)=(1)$.

$(4)\implies (3)$:

We have $b\equiv uv\pmod c$. Let $p\in R$ so that $pv\equiv 1\pmod c$. Hence $pb\equiv u\pmod c$, so there exists an element $q\in R$ such that $pb+qc=u$. Thus (3) holds.

$(3)\implies (2)$:

Since $R$ is a K-Hermite ring, we may write $(d)=(p,q)$ and $d=p_1p+q_1q$ with $(p_1,q_1)=(1)$. Hence $$(p_1,p_1b+q_1c)=(p_1,q_1c)=(1),$$ so $(p_1a,p_1b+q_1c)=(p_1,c)=(1)$. Condition (2) holds with $p$ and $q$ replaced by $p_1$ and $q_1$, respectively.

In the proof of Proposition \[variantKaplansky\], we have used the assumption that $R$ is K-Hermite just for the implication $(3)\implies (2)$.

\[bezoutcrit\] If $R$ is a Bézout domain, then the following condition is equivalent to the conditions of Proposition \[variantKaplansky\]:

$(*)$ For some elements $\lambda, a_1,c_1\in R$ we have $$b+\lambda c\mid (1-a_1a)(1-c_1c).$$

Indeed, assume condition $(*)$. Let $u\in R$ so that $$(u)=(b+\lambda c, 1-a_1a),$$ thus $(u,a)=(1)$ and $\frac {b+\lambda c} u~\mid~ \left(\frac {1-a_1a}u\right) (1-~c_1c)$. Since $(\frac {b+\lambda c} u, \frac {1-a_1a}u)=(1)$, we see that $v:=\frac {b+\lambda c}u$ divides $1-c_1c$, so $(v,c)=(1)$. Thus condition $(*)$ implies condition (4) of Proposition \[variantKaplansky\]. The converse implication is obvious.

Since a K-Hermite ring is an EDR iff each matrix of the form $\bigl(\begin{smallmatrix}a&b\\0&c\end{smallmatrix}\bigr)$ with $(a,b,c)=(1)$ has a diagonal reduction [@Kaplansky-Elemdivimodu:49], Proposition \[variantKaplansky\] provides necessary and sufficient conditions for a K-Hermite ring to be an EDR. We present an additional condition in the next proposition.

\[crit\] Let $R$ be a K-Hermite ring. The following two conditions are equivalent:

1.  $R$ is an elementary divisor ring;

2.  For any elements $x,y,z\in R$ such that $(x,y)=(1)$, there exists an element $\lambda\in R$ such that $x+\lambda y=uv$, where $(u,z)=(v,1-z)=(1)$.

Moreover, the elements $u$ and $v$ can be chosen such that $(u,v)=(1)$.

$(1)\implies (2)$ \[including the requirement that $(u,v)=(1)$\]:

We apply condition (4) of Proposition \[variantKaplansky\] to the elements $a=z,b=x,c=y(1-z)$.

$(2)\implies (1)$:

We verify condition (4) of Proposition \[variantKaplansky\]. Let $(a,b,c)=(1)$. Let $(d)=(b,c)$, thus $(d,a)=(b,c,a)=(1)$. Hence $a\mid 1-d_1d$ for some element $d_1\in R$. Also $b=b_1d,c=c_1d$, where $(b_1,c_1)=(1)$. We apply condition (2) of the present proposition to the elements $$x=b_1,y=c_1,z=d_1d.$$ Thus there are elements $\lambda_1,u_1,v\in R$ so that $b_1+\lambda_1 c_1=u_1v$, where $(u_1,1-d_1d)=(v,d_1d)=(1)$. Let $u=du_1$, thus $(u,a)=1$. Let $\lambda=\lambda_1d$. Hence $b+\lambda c=d(b_1+\lambda_1 c_1)=uv$, and $(u,a)=(1)$. We have $(v,c)=(v,dc_1)=(v,c_1)$ since $(v,d)=(1)$. Since $v$ divides $b_1+\lambda_1c_1$, it follows that $(v,c_1)\mid b_1$, so $(v,c_1)=(1)$. Thus $(v,c)=(1)$, as required.

\[critdomain\] Let $R$ be a Bézout domain. The following two conditions are equivalent:

1.  $R$ is an elementary divisor ring;

2.  For any nonzero elements $x,y,z\in R$, there exists elements $\lambda,a,b\in R$ such that $x+\lambda y\mid y(1-az)(1-b(1-z)$ in $R$.

$(1)\implies (2)$:

Let $(d)=(x,y)$, thus $\frac xd$ and $\frac yd$ are comaximal. By Theorem \[crit\], there are elements $\lambda,a,b\in R$ so that $(\frac xd+\lambda \frac yd)\mid (1-az)(1-bz(1-z))$. Hence $x+\lambda y\mid d(1-az)(1-b(1-z))$, so $x+\lambda y\mid y(1-az)(1-b(1-z))$.

$(2)\implies (1)$:

Let $x_0$ and $y_0$ be comaximal elements in $R$, and let $z\in R$. Thus $(x_0+\lambda y_0)\mid y_0(1-az)(1-b(1-z))$ for some elements $\lambda,a,b\in R$. Since the elements $x_0+\lambda y_0$ and $y_0$ are comaximal, we obtain that $(x_0+\lambda y_0)\mid (1-az)(1-b(1-z))$, so $R$ is an EDR by Remark \[bezoutcrit\].

On rings of almost stable range $1$ {#3}
===================================

Let $R$ be any ring. The following conditions are equivalent:

1.  $R$ is of almost stable range $1$;

2.  For each nonzero element $z\in R$, the ring $R/zR$ is of stable range $1$;

3.  For each three elements $x,y,z\in R$ so that $(x,y)=(1)$ and $z\ne0$, there exists an element $\lambda\in R$ so that $(x+\lambda y,z)=(1)$.

Cf. [@Bass-Alge:68 Proposition 3.2, Ch. V]. $(1)\implies (2)\implies (3)$: Clear.

$(3)\implies (1)$:

Let $I$ be a nonzero ideal of $R$ and let $z$ be a nonzero element in $I$. Let $x+I,y+I$ be two comaximal elements in $R/I$. Hence there exist elements $r,s\in R$ such that $1-rx-sy\in I$. By assumption, there exists an element $\lambda\in R$ such that $(x+\lambda(1-rx),z)R=R$. Thus $x+\lambda sy$ is invertible modulo the ideal $I$. It follows that $R/I$ is of stable range $1$, so $R$ is almost of stable range $1$.

\[almoststable\] The implication $(3)\implies (1)$ in the previous proposition is clear since if $T$ is a homomorphic image of a ring $R$ with finite stable range, then $\operatorname{sr}(T)\le \operatorname{sr}(R)$ [@Bass-Alge:68 Proposition 3.2, Ch. V], although this fact was not used explicitly, but rather its proof (in the above proof of the implication $(2)\implies (3)$ we have $\operatorname{sr}(R/I)\le \operatorname{sr}(R/(z)=1$). This fact implies that if $R$ is an arbitrary ring of stable range $1$, then $R$ is of almost stable range $1$, thus answering the question in [@McGovern-Bezoringwithalmo:08 Remark 3.3]. See also [@McGovern-Bezoringwithalmo:08 Proposition 3.2].

As we have seen in §\[2\], the stable range $1$ property implies Kaplansky’s condition for an arbitrary ring. As for the converse, even if $R$ is an elementary divisor domain, thus $R$ satisfies Kaplansky’s condition, then $R$ does not necessarily has even almost stable range $1$:

\[warrenquest\] An elementary divisor domain (and so Bézout) that does not have almost stable range $1$ (this example answers the question in [@McGovern-Bezoringwithalmo:08 Remark 4.7]).

We use a well-known example of a Bézout domain, namely, $R=\mathbb Z+X\mathbb Q[X]$ (for a general theorem on pullbacks of Bézout domains see [@Houston+Taylor-Aritproppull:07 Theorem 1.9]). $R$ is an elementary divisor ring by [@Costa+MottETAL-cons:78 Theorem 4.61]. However, $R/X\mathbb Q[X]$ is isomorphic to $\mathbb Z$ and $\operatorname{sr}\mathbb Z=2$ (clearly, there is no integer $m$ such that $2+5m=\pm 1$. Thus $\operatorname{sr}\mathbb Z>1$. As mentioned in the introduction, the stable range of any Bézout domain is $\le 2$, hence $\operatorname{sr}\mathbb Z=2$).

We conjecture that a Bézout domain that is a pullback of type $\square$ (as defined in [@Houston+Taylor-Aritproppull:07]) of elementary divisor domains is again an EDR. In this case the conditions of [@Houston+Taylor-Aritproppull:07 Theorem 1.9] must be satisfied. If this conjecture proves to be false, thiwill yield a negative answer to the question in [@Henriksen-Someremaelemdivi:55] whether a Bézout domain is an EDR.
